<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Selection System - Godot RTS Entity Controller Documentation</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Selection System";
        var mkdocs_page_input_path = "systems\\selection.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Godot RTS Entity Controller Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../getting-started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../core-concepts/">Core Concepts</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Systems</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../player-input/">Player Input System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../entity/">Entity System</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Selection System</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#how-selection-works">How Selection Works</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#single-unit-selection">Single Unit Selection</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#multiple-unit-selection">Multiple Unit Selection</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#shiftclick">Shift+Click</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#box-select-drag">Box Select (Drag)</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#deselecting-units">Deselecting Units</a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rts_selectable">RTS_Selectable</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rts_boxable">RTS_Boxable</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#rts_pickablephysicscomponent">RTS_PickablePhysicsComponent</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#selection-feedback">Selection Feedback</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#programmatic-selection">Programmatic Selection</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#spatial-selection-queries">Spatial selection queries:</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#see-also">See Also</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../movement/">Movement & Navigation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../abilities/">Abilities System</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../combat/">Combat System</a>
                  </li>
                  <li class="toctree-l1"><a class="" href="../../autoloads.md">Autoloads</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Components</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/overview/">Overview</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/selectable/">Selectable</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/movable/">Movable</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/health/">Health</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/defense/">Defense</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/attack/">Attack</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../components/visual/">Visual Component</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Advanced</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../advanced/spatial-hashing/">Spatial Hashing</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Reference</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/best-practices/">Best Practices</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../reference/troubleshooting/">Troubleshooting</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Godot RTS Entity Controller Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Systems</li>
      <li class="breadcrumb-item active">Selection System</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="selection-system">Selection System</h1>
<h2 id="overview">Overview</h2>
<p>The Selection System manages which units are currently selected and provides feedback to the player about their selection. Only entities with the RTS_Selectable component can be selected. There are two types of selection: Pickable (using physics raycast) or Boxable (using click and drag box). A RTS_Selectable can have one or both of these types of selection configured.</p>
<h2 id="how-selection-works">How Selection Works</h2>
<h3 id="single-unit-selection">Single Unit Selection</h3>
<ol>
<li>RTS_PhysicsSelection uses RTS_PickablePhysicsComponent to determin hovered entities</li>
<li>Player clicks on a entity.</li>
<li>If the entity is hovered, RTS_Selection selects the entity</li>
<li>Necessary events are emitted</li>
</ol>
<p>Note that Selection keeps track of the RTS_Selectable component, not RTS_Entity itself, since selection only cares about entities which have the RTS_Selectable component</p>
<h3 id="multiple-unit-selection">Multiple Unit Selection</h3>
<h4 id="shiftclick">Shift+Click</h4>
<ul>
<li>Adds enitity to current selection</li>
<li>Previous units remain selected</li>
</ul>
<h4 id="box-select-drag">Box Select (Drag)</h4>
<ul>
<li>Drag from one point to another</li>
<li>All <code>RTS_BoxableComponent</code> units within the box are selected</li>
<li>Can be combined with Shift to add to selection</li>
</ul>
<h4 id="deselecting-units">Deselecting Units</h4>
<p>By defaults unit can not be deselected. Only when selecting another entity does the previous selected entity get deselected.</p>
<h2 id="rts_selectable">RTS_Selectable</h2>
<p>The <code>RTS_Selectable</code> component enables a unit to be selected. Use the <code>priority</code> integer to determin which entity has the highest priority, for example when selecting entities of different types. This might be useful for casting abilities, or displaying the entity UI of only the highest priority entity.</p>
<p>Populate RTS_Selectable's <code>pickable</code> (ideally as a child component) to make the entity pickable (selection via mouse click), populate the <code>boxable</code> component to make it selectable via click and drag.</p>
<h2 id="rts_boxable">RTS_Boxable</h2>
<p>Requires a collision_shape <code>CollisionShape3D</code> to determine the bounds for the box selection. This collision_shape has to be of type <code>CapsuleShape3D</code> or <code>BoxShape3D</code>.</p>
<h2 id="rts_pickablephysicscomponent">RTS_PickablePhysicsComponent</h2>
<p>Requires a static_body <code>StaticBody3D</code> used for raycasting to determine wether a unit can be selected (when hovered)</p>
<h2 id="selection-feedback">Selection Feedback</h2>
<p>RTS_Selectable toggles the visibilty of the following meshes to visually show hover/selection state.</p>
<pre><code class="language-gdscript">@export var selection_cone: MeshInstance3D
@export var hover_quad: MeshInstance3D
</code></pre>
<h2 id="programmatic-selection">Programmatic Selection</h2>
<p>While usually not needed, use RTS_Selection if you want to manually add entities to the selection.</p>
<pre><code class="language-gdscript">#Add one or multiple entities
selection.add_to_selection_bulk(...)

# Remove from selection
selection.remove_from_selection_bulk(...)
</code></pre>
<h2 id="spatial-selection-queries">Spatial selection queries:</h2>
<p>For spatial selections (finding units within a certain radius of a point) see <a href="../../advanced/spatial-hashing/">Spatial Hashing</a></p>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../player-input.md">Player Input System</a> - How input triggers selection</li>
<li><a href="../../components/selectable/">Selectable Component</a> - Component details</li>
<li><a href="../../core-concepts/">Core Concepts</a> - Architecture overview</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../entity/" class="btn btn-neutral float-left" title="Entity System"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../movement/" class="btn btn-neutral float-right" title="Movement & Navigation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../entity/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../movement/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
